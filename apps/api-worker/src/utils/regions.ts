export type WDOLData = {
  colos: WDOLColosData;
};

export type WDOLColosData = {
  [colo: string]: WDOLColoData;
};

export type WDOLColoData = {
  nearestRegion: string;
};

export const fetchColoToRegionMapping = async () => {
  const response = await fetch(
    "https://where.durableobjects.live/api/v3/data.json",
  );

  const body = (await response.json()) as WDOLData;
  // colo to region map
  const coloToRegion = new Map<string, string>();
  // return body.colos;
  for (const [colo, data] of Object.entries(body.colos)) {
    coloToRegion.set(colo, data.nearestRegion);
  }

  console.log(coloToRegion);
};

// fetchColoToRegionMapping();

export const COLO_TO_REGION_MAP = {
  ASK: "weur",
  NAG: "apac",
  LHE: "apac",
  BNU: "enam",
  SOF: "eeur",
  KCH: "apac",
  SOD: "enam",
  MCI: "sam",
  RUH: "me",
  FRA: "me",
  JIB: "afr",
  LAX: "wnam",
  TLV: "me",
  KNU: "apac",
  ZAG: "eeur",
  EWR: "sam",
  SJC: "wnam",
  OTP: "eeur",
  CRK: "apac",
  CFC: "sam",
  ATH: "eeur",
  EBB: "afr",
  BTS: "eeur",
  CCU: "apac",
  KGL: "weur",
  MXP: "eeur",
  CMB: "apac",
  LCA: "afr",
  WAW: "eeur",
  OKA: "apac",
  BSB: "enam",
  EZE: "enam",
  FSD: "enam",
  PNH: "apac",
  BNE: "oc",
  CHC: "oc",
  ORN: "weur",
  RDU: "enam",
  RIX: "me",
  TBS: "me",
  MUC: "me",
  ULN: "me",
  LUX: "afr",
  IST: "me",
  MLG: "apac",
  HKG: "apac",
  JNB: "weur",
  AAE: "eeur",
  YYC: "wnam",
  SJO: "sam",
  MLE: "afr",
  POA: "enam",
  SJK: "enam",
  CDG: "weur",
  DAC: "apac",
  QRO: "wnam",
  POS: "enam",
  CAI: "weur",
  LHR: "weur",
  BRU: "afr",
  GDL: "wnam",
  MFM: "apac",
  EBL: "me",
  MAD: "weur",
  JED: "me",
  PMW: "enam",
  TPA: "enam",
  MCT: "me",
  KWI: "afr",
  FCO: "eeur",
  YVR: "wnam",
  MDE: "sam",
  YXE: "wnam",
  JOI: "enam",
  DKR: "weur",
  VNO: "eeur",
  MRS: "weur",
  SJP: "sam",
  ABQ: "wnam",
  XAP: "sam",
  DUR: "weur",
  QWJ: "sam",
  ICN: "apac",
  BLR: "apac",
  SUV: "oc",
  SJU: "enam",
  YUL: "enam",
  CWB: "enam",
  HYD: "apac",
  CPH: "weur",
  ALA: "me",
  SDQ: "enam",
  NOU: "oc",
  GYD: "afr",
  BOM: "apac",
  KHH: "apac",
  ACC: "afr",
  BOG: "enam",
  MIA: "enam",
  LAD: "weur",
  ZDM: "afr",
  LOS: "weur",
  GIG: "enam",
  NRT: "apac",
  DMM: "weur",
  BKK: "apac",
  MPM: "weur",
  BUD: "eeur",
  KJA: "me",
  BGI: "sam",
  MAO: "sam",
  XNH: "eeur",
  PMO: "eeur",
  UIO: "enam",
  PIT: "enam",
  BOS: "enam",
  GEO: "sam",
  KBP: "me",
  LIM: "enam",
  CNF: "enam",
  DAR: "weur",
  NQN: "sam",
  NBO: "afr",
  MEX: "enam",
  KIN: "sam",
  TGU: "enam",
  BCN: "afr",
  DTW: "enam",
  PHL: "sam",
  KTM: "apac",
  OMA: "wnam",
  GUA: "sam",
  TXL: "weur",
  MAN: "weur",
  SGN: "apac",
  SCL: "sam",
  AMM: "afr",
  DOH: "weur",
  IAD: "sam",
  BOD: "afr",
  YOW: "sam",
  SAP: "enam",
  CLE: "enam",
  GYN: "sam",
  CEB: "apac",
  TNR: "weur",
  STI: "sam",
  SKG: "me",
  YYZ: "enam",
  LIS: "weur",
  STR: "eeur",
  TLL: "me",
  KHI: "apac",
  KIV: "me",
  HNL: "wnam",
  MRU: "weur",
  CPT: "afr",
  SLC: "wnam",
  BSR: "me",
  BGR: "sam",
  PTY: "sam",
  TUN: "afr",
  COR: "enam",
  VIE: "me",
  BGW: "eeur",
  LLK: "me",
  VTE: "apac",
  HAN: "apac",
  LYS: "afr",
  ISU: "eeur",
  WRO: "me",
  MLA: "afr",
  YWG: "sam",
  CGP: "apac",
  BEG: "eeur",
  MSQ: "me",
  SEA: "wnam",
  CCP: "enam",
  DUS: "afr",
  DAD: "apac",
  FOR: "enam",
  LUN: "weur",
  MBA: "weur",
  TIA: "me",
  YHZ: "sam",
  GVA: "eeur",
  MNL: "apac",
  BAQ: "sam",
  HFA: "weur",
  CLO: "sam",
  GYE: "enam",
  BAH: "apac",
  EVN: "afr",
  PDX: "wnam",
  AUS: "wnam",
  ZRH: "eeur",
  IAH: "sam",
  MEM: "sam",
  GOT: "weur",
  BUF: "sam",
  PER: "oc",
  MAA: "apac",
  IXC: "apac",
  ASU: "enam",
  KEF: "weur",
  GRU: "sam",
  CBR: "oc",
  LED: "me",
  FUK: "apac",
  HAM: "eeur",
  BEL: "enam",
  FRU: "me",
  RIC: "sam",
  DXB: "apac",
  DEL: "apac",
  SAT: "wnam",
  NVT: "sam",
  SYD: "oc",
  ALG: "afr",
  JOG: "apac",
  KIX: "apac",
  AMD: "apac",
  FLN: "enam",
  CNX: "apac",
  BEY: "afr",
  RAO: "sam",
  OSL: "me",
  NJF: "eeur",
  JDO: "sam",
  PAT: "apac",
  CNN: "apac",
  KUL: "apac",
  AKL: "oc",
  CZL: "afr",
  PBH: "apac",
  AMS: "weur",
  GBE: "afr",
  MSP: "sam",
  ARN: "me",
  CGB: "enam",
  SSA: "enam",
  HEL: "me",
  DEN: "wnam",
  SAN: "wnam",
  AKX: "eeur",
  GUM: "wnam",
  REC: "enam",
  LAS: "wnam",
  ADL: "oc",
  DUB: "afr",
  ORD: "enam",
  DFW: "wnam",
  CMH: "sam",
  BNA: "sam",
  SIN: "apac",
  CGK: "apac",
  CLT: "sam",
  PRG: "eeur",
  SMF: "wnam",
  STL: "sam",
  MEL: "oc",
  CGY: "apac",
  DME: "eeur",
  ADB: "me",
  ATL: "enam",
  PBM: "enam",
  RUN: "afr",
  OKC: "sam",
  TPE: "apac",
  TLH: "enam",
  PPT: "wnam",
  ISB: "apac",
  IND: "sam",
  URT: "apac",
  DPS: "apac",
  PHX: "wnam",
};

export type Colo = keyof typeof COLO_TO_REGION_MAP;
